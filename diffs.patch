Index: ChangeLog
2002-07-25  Yann Régis-Gianas  <yann@lrde.epita.fr>
(0.95)
	Changes to be g++-2.95.4 compliant :

	* include/vaucanson/fundamental/element_ops.hh : change operator namespace std.
	* include/vaucanson/fundamental/element.hh : use system.hh.
	* include/vaucanson/algebra/concept/alphabets_base.hxx : use system.hh, set() => this->set().
	* configure.ac
	+AM_CONFIG_HEADER(include/vaucanson/config/config.hh)
	+AC_CHECK_HEADERS([limits])
	+AC_CHECK_HEADERS([stl_config.h])
	* src/tests/check/tests_stuff.cc : add iomanip. redesign msg.
	* include/vaucanson/misc/numerical_constraints.hh : 
	use limits.hh if limit std header does not exists.
	* src/tests/algebra/semiring/semiring-test.hh : minor.
	* include/vaucanson/algebra/concrete/semiring/tropical_semiring.hxx : use
	* src/tests/algebra/alphabets/alphabets-basic-test.cc : use system.hh
	* include/vaucanson/algebra/concept/freemonoid_base.hxx : replace set() by this->set().
	* include/vaucanson/algebra/concrete/free_monoid/str_words.hxx : use rand() not random().
	* src/tests/algebra/series/series-test.cc : use system.hh
	* src/tests/algebra/series/series-test.hh : idem.
	* include/vaucanson/automata/concrete/manylinks_states.hh : 	
	does not use std::iterator for the moment since g++-2 does not implement it.
	* include/vaucanson/automata/concrete/manylinks_edges.hh : use system.hh
	* include/vaucanson/automata/concept/automata_base.hxx : remove default arg for deltac.
	* include/vaucanson/automata/concept/automata_base.hh : remove default arg for deltac.
	-    DELTA_DECL(delta, delta_kind::edges, = delta_kind::edges());
	-    DELTA_DECL(rdelta, delta_kind::edges, = delta_kind::edges());
	+    DELTA_DECL(delta, delta_kind::edges, );
	+    DELTA_DECL(rdelta, delta_kind::edges, );
	* include/vaucanson/automata/concept/kinds.hh : use system.hh
	* include/vaucanson/algorithms/union.hxx : use new version of deltac.
	* include/vaucanson/algorithms/normalized.hxx : idem.
	* include/vaucanson/tools/usual.hh : use system.hh
	* include/vaucanson/tools/gen_random.hxx : use rand() not random() !
	* include/vaucanson/tools/gen_random.hh : use system.hh 
	* include/vaucanson/misc/random.hxx : use rand() not random().
	* include/vaucanson/algorithms/moore.hxx : trim the result.
	* include/vaucanson/algorithms/hopcroft.hxx : idem.
	* src/tests/automata/algos/realtime_test.hh : use SUCCESS_RATE macro.
	* src/tests/automata/algos/minimization_test.hh : idem.
	* src/tests/tests-suites/usual_automaton_t/coherence_state_edge-test : 
--- tests/tests-suites/usual_automaton_t/coherence_state_edge-test Wed, 24 Jul 2002 17:59:26 +0200 yann (vaucanson/f/40_coherence_ 1.4 700)
+++ tests/tests-suites/usual_automaton_t/coherence_state_edge-test Thu, 25 Jul 2002 18:41:00 +0200 yann (vaucanson/f/40_coherence_ 1.4 700)
@@ -1,1554 +1,134 @@
-ELF


Index: include/vaucanson/fundamental/element_ops.hh
--- include/vaucanson/fundamental/element_ops.hh Tue, 23 Jul 2002 14:46:29 +0200 yann (vaucanson/5_element_op 1.7 600)
+++ include/vaucanson/fundamental/element_ops.hh Thu, 25 Jul 2002 18:10:30 +0200 yann (vaucanson/5_element_op 1.7 600)
@@ -21,6 +21,7 @@
 #ifndef FUNDAMENTAL_ELEMENTS_OPS_HH
 # define FUNDAMENTAL_ELEMENTS_OPS_HH
 
+# include <vaucanson/config/system.hh>
 # include <vaucanson/fundamental/predefs.hh>
 # include <vaucanson/fundamental/op_traits.hh>
 # include <vaucanson/misc/selectors.hh>
@@ -33,7 +34,7 @@
 static inline							\
 bool operator Op(const vcsn::Element<S1, T1>& e1,	\
 		 const vcsn::Element<S2, T2>& e2)	\
-{ return e1.value() Op e2.value(); }
+{  using namespace std; return e1.value() Op e2.value(); }
 
     ELEMENT_OPERATOR(==);
     ELEMENT_OPERATOR(!=);
@@ -223,7 +224,7 @@
   return vcsn::op_neg(e.set(), e.value()); 
 }
 
-} // vcsn
+} // std
 
 
 
Index: include/vaucanson/fundamental/element.hh
--- include/vaucanson/fundamental/element.hh Tue, 23 Jul 2002 14:46:29 +0200 yann (vaucanson/7_element.hh 1.5 600)
+++ include/vaucanson/fundamental/element.hh Thu, 25 Jul 2002 16:57:16 +0200 yann (vaucanson/7_element.hh 1.5 600)
@@ -21,6 +21,7 @@
 #ifndef FUNDAMENTAL_ELEMENT_HH
 # define FUNDAMENTAL_ELEMENT_HH
 
+# include <vaucanson/config/system.hh>
 # include <vaucanson/fundamental/predefs.hh>
 # include <vaucanson/fundamental/meta_set.hh>
 # include <vaucanson/fundamental/meta_element.hh>
Index: include/vaucanson/algebra/concept/alphabets_base.hxx
--- include/vaucanson/algebra/concept/alphabets_base.hxx Wed, 24 Jul 2002 17:33:25 +0200 yann (vaucanson/32_alphabets_ 1.8 600)
+++ include/vaucanson/algebra/concept/alphabets_base.hxx Thu, 25 Jul 2002 17:21:10 +0200 yann (vaucanson/32_alphabets_ 1.8 600)
@@ -21,6 +21,7 @@
 #ifndef ALGEBRA_ALPHABETS_BASE_HXX
 # define ALGEBRA_ALPHABETS_BASE_HXX
 
+# include <vaucanson/config/system.hh>
 # include <vaucanson/algebra/concept/alphabets_base.hh>
 # include <vaucanson/misc/container_ops.hh>
 # include <vaucanson/misc/random.hh>
@@ -55,56 +56,56 @@
     size_t 
     MetaElement<AlphabetsBase<Self>, T>::size() const
     { 
-      return op_size(set(), value()); 
+      return op_size(this->set(), this->value()); 
     }
     
     template<class Self, typename T>
     bool 
     MetaElement<AlphabetsBase<Self>, T>::contains(const letter_t& l) const
     { 
-      return op_contains_e(set(), value(), l); 
+      return op_contains_e(this->set(), this->value(), l); 
     }
     
     template<class Self, typename T>
     bool 
     MetaElement<AlphabetsBase<Self>, T>::is_finite() const
     { 
-      return op_is_finite(set(), value()); 
+      return op_is_finite(this->set(), this->value()); 
     }
     
     template<class Self, typename T>
     typename MetaElement<AlphabetsBase<Self>, T>::iterator 
     MetaElement<AlphabetsBase<Self>, T>::begin() 
     { 
-      return op_begin(set(), value()); 
+      return op_begin(this->set(), this->value()); 
     }
     
     template<class Self, typename T> 
     typename MetaElement<AlphabetsBase<Self>, T>::const_iterator 
     MetaElement<AlphabetsBase<Self>, T>::begin() const
     { 
-      return op_begin(set(), value()); 
+      return op_begin(this->set(), this->value()); 
     }
     
     template<class Self, typename T>
     typename MetaElement<AlphabetsBase<Self>, T>::iterator 
     MetaElement<AlphabetsBase<Self>, T>::end() 
     { 
-      return op_end(set(), value()); 
+      return op_end(this->set(), this->value()); 
     }
     
     template<class Self, typename T>
     typename MetaElement<AlphabetsBase<Self>, T>::const_iterator 
     MetaElement<AlphabetsBase<Self>, T>::end() const
     { 
-      return op_end(set(), value()); 
+      return op_end(this->set(), this->value()); 
     }
     
     template<class Self, typename T>
     void 
     MetaElement<AlphabetsBase<Self>, T>::insert(const letter_t& l) 
     { 
-      op_insert(set(), value(), l); 
+      op_insert(this->set(), this->value(), l); 
     }
     
   template<class Self, typename T>
@@ -113,7 +114,7 @@
   { 
     assert (this->size() > 0);
     int  n = this->size() - 1;
-    int  c = ((unsigned) trunc(((float) random() / (float) RAND_MAX) * n));
+    int  c = ((unsigned) trunc(((float) rand() / (float) RAND_MAX) * n));
 
     iterator it = this->begin();
 
Index: configure
--- configure Wed, 24 Jul 2002 17:33:25 +0200 yann (vaucanson/40_configure 1.3.1.11 700)
+++ configure Thu, 25 Jul 2002 18:24:58 +0200 yann (vaucanson/40_configure 1.3.1.11 700)
@@ -261,6 +261,43 @@
 PACKAGE_BUGREPORT='vaucanson-bugs@lrde.epita.fr'
 
 ac_unique_file="ChangeLog"
+# Factoring default headers for most tests.
+ac_includes_default="\
+#include <stdio.h>
+#if HAVE_SYS_TYPES_H
+# include <sys/types.h>
+#endif
+#if HAVE_SYS_STAT_H
+# include <sys/stat.h>
+#endif
+#if STDC_HEADERS
+# include <stdlib.h>
+# include <stddef.h>
+#else
+# if HAVE_STDLIB_H
+#  include <stdlib.h>
+# endif
+#endif
+#if HAVE_STRING_H
+# if !STDC_HEADERS && HAVE_MEMORY_H
+#  include <memory.h>
+# endif
+# include <string.h>
+#endif
+#if HAVE_STRINGS_H
+# include <strings.h>
+#endif
+#if HAVE_INTTYPES_H
+# include <inttypes.h>
+#else
+# if HAVE_STDINT_H
+#  include <stdint.h>
+# endif
+#endif
+#if HAVE_UNISTD_H
+# include <unistd.h>
+#endif"
+
 
 # Initialize some variables set by options.
 ac_init_help=
@@ -713,6 +750,10 @@
 ac_env_CPPFLAGS_value=$CPPFLAGS
 ac_cv_env_CPPFLAGS_set=${CPPFLAGS+set}
 ac_cv_env_CPPFLAGS_value=$CPPFLAGS
+ac_env_CXXCPP_set=${CXXCPP+set}
+ac_env_CXXCPP_value=$CXXCPP
+ac_cv_env_CXXCPP_set=${CXXCPP+set}
+ac_cv_env_CXXCPP_value=$CXXCPP
 
 #
 # Report the --help message.
@@ -800,6 +841,7 @@
               nonstandard directory <lib dir>
   CPPFLAGS    C/C++ preprocessor flags, e.g. -I<include dir> if you have
               headers in a nonstandard directory <include dir>
+  CXXCPP      C++ preprocessor
 
 Use these variables to override the choices made by `configure' or to help
 it to find libraries and programs with nonstandard names/locations.
@@ -1161,6 +1203,11 @@
 
 
 
+# Add the stamp file to the list of files AC keeps track of,
+# along with our hook.
+ac_config_headers="$ac_config_headers include/vaucanson/config/config.hh"
+
+
 
 am__api_version="1.6"
 ac_aux_dir=
@@ -2275,6 +2322,203 @@
   RANLIB="$ac_cv_prog_RANLIB"
 fi
 
+ac_ext=cc
+ac_cpp='$CXXCPP $CPPFLAGS'
+ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+
+
+
+ac_ext=cc
+ac_cpp='$CXXCPP $CPPFLAGS'
+ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
+echo "$as_me:$LINENO: checking how to run the C++ preprocessor" >&5
+echo $ECHO_N "checking how to run the C++ preprocessor... $ECHO_C" >&6
+if test -z "$CXXCPP"; then
+  if test "${ac_cv_prog_CXXCPP+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+      # Double quotes because CXXCPP needs to be expanded
+    for CXXCPP in "$CXX -E" "/lib/cpp"
+    do
+      ac_preproc_ok=false
+for ac_cxx_preproc_warn_flag in '' yes
+do
+  # Use a header file that comes with gcc, so configuring glibc
+  # with a fresh cross-compiler works.
+  # On the NeXT, cc -E runs the code through the compiler's parser,
+  # not just through cpp. "Syntax error" is here to catch this case.
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+#include <assert.h>
+                     Syntax error
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_cxx_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  :
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  # Broken: fails on valid input.
+continue
+fi
+rm -f conftest.err conftest.$ac_ext
+
+  # OK, works on sane cases.  Now check whether non-existent headers
+  # can be detected and how.
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+#include <ac_nonexistent.h>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_cxx_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  # Broken: success on invalid input.
+continue
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  # Passes both tests.
+ac_preproc_ok=:
+break
+fi
+rm -f conftest.err conftest.$ac_ext
+
+done
+# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
+rm -f conftest.err conftest.$ac_ext
+if $ac_preproc_ok; then
+  break
+fi
+
+    done
+    ac_cv_prog_CXXCPP=$CXXCPP
+
+fi
+  CXXCPP=$ac_cv_prog_CXXCPP
+else
+  ac_cv_prog_CXXCPP=$CXXCPP
+fi
+echo "$as_me:$LINENO: result: $CXXCPP" >&5
+echo "${ECHO_T}$CXXCPP" >&6
+ac_preproc_ok=false
+for ac_cxx_preproc_warn_flag in '' yes
+do
+  # Use a header file that comes with gcc, so configuring glibc
+  # with a fresh cross-compiler works.
+  # On the NeXT, cc -E runs the code through the compiler's parser,
+  # not just through cpp. "Syntax error" is here to catch this case.
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+#include <assert.h>
+                     Syntax error
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_cxx_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  :
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  # Broken: fails on valid input.
+continue
+fi
+rm -f conftest.err conftest.$ac_ext
+
+  # OK, works on sane cases.  Now check whether non-existent headers
+  # can be detected and how.
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+#include <ac_nonexistent.h>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_cxx_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  # Broken: success on invalid input.
+continue
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  # Passes both tests.
+ac_preproc_ok=:
+break
+fi
+rm -f conftest.err conftest.$ac_ext
+
+done
+# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
+rm -f conftest.err conftest.$ac_ext
+if $ac_preproc_ok; then
+  :
+else
+  { { echo "$as_me:$LINENO: error: C++ preprocessor \"$CXXCPP\" fails sanity check" >&5
+echo "$as_me: error: C++ preprocessor \"$CXXCPP\" fails sanity check" >&2;}
+   { (exit 1); exit 1; }; }
+fi
 
 ac_ext=cc
 ac_cpp='$CXXCPP $CPPFLAGS'
@@ -2283,6 +2527,432 @@
 ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 
 
+echo "$as_me:$LINENO: checking for ANSI C header files" >&5
+echo $ECHO_N "checking for ANSI C header files... $ECHO_C" >&6
+if test "${ac_cv_header_stdc+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+#include <stdlib.h>
+#include <stdarg.h>
+#include <string.h>
+#include <float.h>
+
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_cxx_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_cv_header_stdc=yes
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  ac_cv_header_stdc=no
+fi
+rm -f conftest.err conftest.$ac_ext
+
+if test $ac_cv_header_stdc = yes; then
+  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+#include <string.h>
+
+_ACEOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "memchr" >/dev/null 2>&1; then
+  :
+else
+  ac_cv_header_stdc=no
+fi
+rm -f conftest*
+
+fi
+
+if test $ac_cv_header_stdc = yes; then
+  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+#include <stdlib.h>
+
+_ACEOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "free" >/dev/null 2>&1; then
+  :
+else
+  ac_cv_header_stdc=no
+fi
+rm -f conftest*
+
+fi
+
+if test $ac_cv_header_stdc = yes; then
+  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
+  if test "$cross_compiling" = yes; then
+  :
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+#include <ctype.h>
+#if ((' ' & 0x0FF) == 0x020)
+# define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
+# define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
+#else
+# define ISLOWER(c) (('a' <= (c) && (c) <= 'i') \
+                     || ('j' <= (c) && (c) <= 'r') \
+                     || ('s' <= (c) && (c) <= 'z'))
+# define TOUPPER(c) (ISLOWER(c) ? ((c) | 0x40) : (c))
+#endif
+
+#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
+int
+main ()
+{
+  int i;
+  for (i = 0; i < 256; i++)
+    if (XOR (islower (i), ISLOWER (i))
+        || toupper (i) != TOUPPER (i))
+      exit(2);
+  exit (0);
+}
+_ACEOF
+rm -f conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  :
+else
+  echo "$as_me: program exited with status $ac_status" >&5
+echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+( exit $ac_status )
+ac_cv_header_stdc=no
+fi
+rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
+fi
+fi
+fi
+echo "$as_me:$LINENO: result: $ac_cv_header_stdc" >&5
+echo "${ECHO_T}$ac_cv_header_stdc" >&6
+if test $ac_cv_header_stdc = yes; then
+
+cat >>confdefs.h <<\_ACEOF
+#define STDC_HEADERS 1
+_ACEOF
+
+fi
+
+# On IRIX 5.3, sys/types and inttypes.h are conflicting.
+
+
+
+
+
+
+
+
+
+for ac_header in sys/types.h sys/stat.h stdlib.h string.h memory.h strings.h \
+                  inttypes.h stdint.h unistd.h
+do
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_Header=yes"
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+eval "$as_ac_Header=no"
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
+
+fi
+
+done
+
+
+
+for ac_header in limits
+do
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+else
+  # Is the header compilable?
+echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_header_compiler=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6
+
+# Is the header present?
+echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+#include <$ac_header>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_cxx_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_header_preproc=yes
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  ac_header_preproc=no
+fi
+rm -f conftest.err conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc in
+  yes:no )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+  no:yes )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header: check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+esac
+echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  eval "$as_ac_Header=$ac_header_preproc"
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+
+fi
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
+
+fi
+
+done
+
+
+for ac_header in stl_config.h
+do
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+else
+  # Is the header compilable?
+echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+$ac_includes_default
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+ac_header_compiler=no
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6
+
+# Is the header present?
+echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line $LINENO "configure"
+#include "confdefs.h"
+#include <$ac_header>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  egrep -v '^ *\+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_cxx_preproc_warn_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_header_preproc=yes
+else
+  echo "$as_me: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  ac_header_preproc=no
+fi
+rm -f conftest.err conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc in
+  yes:no )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+  no:yes )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header: check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;};;
+esac
+echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  eval "$as_ac_Header=$ac_header_preproc"
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+
+fi
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
+
+fi
+
+done
+
+
 ac_config_files="$ac_config_files Makefile src/Makefile src/tests/Makefile src/tests/check/Makefile src/tests/fundamental/Makefile src/tests/algebra/Makefile src/tests/algebra/semiring/Makefile src/tests/algebra/alphabets/Makefile src/tests/algebra/free_monoid/Makefile src/tests/algebra/series/Makefile src/tests/automata/Makefile src/tests/automata/algos/Makefile src/tests/automata/implementation_check/Makefile src/tests/tests-suites/Makefile src/tests/bin/Makefile src/tests/tests-suites/usual_automaton_t/Makefile include/Makefile"
 
 
@@ -2360,38 +3030,7 @@
 }'
 fi
 
-# Transform confdefs.h into DEFS.
-# Protect against shell expansion while executing Makefile rules.
-# Protect against Makefile macro expansion.
-#
-# If the first sed substitution is executed (which looks for macros that
-# take arguments), then we branch to the quote section.  Otherwise,
-# look for a macro that doesn't take arguments.
-cat >confdef2opt.sed <<\_ACEOF
-t clear
-: clear
-s,^[ 	]*#[ 	]*define[ 	][ 	]*\([^ 	(][^ 	(]*([^)]*)\)[ 	]*\(.*\),-D\1=\2,g
-t quote
-s,^[ 	]*#[ 	]*define[ 	][ 	]*\([^ 	][^ 	]*\)[ 	]*\(.*\),-D\1=\2,g
-t quote
-d
-: quote
-s,[ 	`~#$^&*(){}\\|;'"<>?],\\&,g
-s,\[,\\&,g
-s,\],\\&,g
-s,\$,$$,g
-p
-_ACEOF
-# We use echo to avoid assuming a particular line-breaking character.
-# The extra dot is to prevent the shell from consuming trailing
-# line-breaks from the sub-command output.  A line-break within
-# single-quotes doesn't work because, if this script is created in a
-# platform that uses two characters for line-breaks (e.g., DOS), tr
-# would break.
-ac_LF_and_DOT=`echo; echo .`
-DEFS=`sed -n -f confdef2opt.sed confdefs.h | tr "$ac_LF_and_DOT" ' .'`
-rm -f confdef2opt.sed
-
+DEFS=-DHAVE_CONFIG_H
 
 if test -z "${AMDEP_TRUE}" && test -z "${AMDEP_FALSE}"; then
   { { echo "$as_me:$LINENO: error: conditional \"AMDEP\" was never defined.
@@ -2694,10 +3333,15 @@
       --recheck    update $as_me by reconfiguring in the same conditions
   --file=FILE[:TEMPLATE]
                    instantiate the configuration file FILE
+  --header=FILE[:TEMPLATE]
+                   instantiate the configuration header FILE
 
 Configuration files:
 $config_files
 
+Configuration headers:
+$config_headers
+
 Configuration commands:
 $config_commands
 
@@ -2818,6 +3462,7 @@
   "src/tests/tests-suites/usual_automaton_t/Makefile" ) CONFIG_FILES="$CONFIG_FILES src/tests/tests-suites/usual_automaton_t/Makefile" ;;
   "include/Makefile" ) CONFIG_FILES="$CONFIG_FILES include/Makefile" ;;
   "depfiles" ) CONFIG_COMMANDS="$CONFIG_COMMANDS depfiles" ;;
+  "include/vaucanson/config/config.hh" ) CONFIG_HEADERS="$CONFIG_HEADERS include/vaucanson/config/config.hh" ;;
   *) { { echo "$as_me:$LINENO: error: invalid argument: $ac_config_target" >&5
 echo "$as_me: error: invalid argument: $ac_config_target" >&2;}
    { (exit 1); exit 1; }; };;
@@ -2830,6 +3475,7 @@
 # bizarre bug on SunOS 4.1.3.
 if $ac_need_defaults; then
   test "${CONFIG_FILES+set}" = set || CONFIG_FILES=$config_files
+  test "${CONFIG_HEADERS+set}" = set || CONFIG_HEADERS=$config_headers
   test "${CONFIG_COMMANDS+set}" = set || CONFIG_COMMANDS=$config_commands
 fi
 
@@ -2932,6 +3578,7 @@
 s,@CXXDEPMODE@,$CXXDEPMODE,;t t
 s,@RANLIB@,$RANLIB,;t t
 s,@ac_ct_RANLIB@,$ac_ct_RANLIB,;t t
+s,@CXXCPP@,$CXXCPP,;t t
 CEOF
 
 _ACEOF
@@ -3130,6 +3777,229 @@
     rm -f $tmp/out
   fi
 
+done
+_ACEOF
+cat >>$CONFIG_STATUS <<\_ACEOF
+
+#
+# CONFIG_HEADER section.
+#
+
+# These sed commands are passed to sed as "A NAME B NAME C VALUE D", where
+# NAME is the cpp macro being defined and VALUE is the value it is being given.
+#
+# ac_d sets the value in "#define NAME VALUE" lines.
+ac_dA='s,^\([ 	]*\)#\([ 	]*define[ 	][ 	]*\)'
+ac_dB='[ 	].*$,\1#\2'
+ac_dC=' '
+ac_dD=',;t'
+# ac_u turns "#undef NAME" without trailing blanks into "#define NAME VALUE".
+ac_uA='s,^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
+ac_uB='$,\1#\2define\3'
+ac_uC=' '
+ac_uD=',;t'
+
+for ac_file in : $CONFIG_HEADERS; do test "x$ac_file" = x: && continue
+  # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
+  case $ac_file in
+  - | *:- | *:-:* ) # input from stdin
+        cat >$tmp/stdin
+        ac_file_in=`echo "$ac_file" | sed 's,[^:]*:,,'`
+        ac_file=`echo "$ac_file" | sed 's,:.*,,'` ;;
+  *:* ) ac_file_in=`echo "$ac_file" | sed 's,[^:]*:,,'`
+        ac_file=`echo "$ac_file" | sed 's,:.*,,'` ;;
+  * )   ac_file_in=$ac_file.in ;;
+  esac
+
+  test x"$ac_file" != x- && { echo "$as_me:$LINENO: creating $ac_file" >&5
+echo "$as_me: creating $ac_file" >&6;}
+
+  # First look for the input files in the build tree, otherwise in the
+  # src tree.
+  ac_file_inputs=`IFS=:
+    for f in $ac_file_in; do
+      case $f in
+      -) echo $tmp/stdin ;;
+      [\\/$]*)
+         # Absolute (can't be DOS-style, as IFS=:)
+         test -f "$f" || { { echo "$as_me:$LINENO: error: cannot find input file: $f" >&5
+echo "$as_me: error: cannot find input file: $f" >&2;}
+   { (exit 1); exit 1; }; }
+         echo $f;;
+      *) # Relative
+         if test -f "$f"; then
+           # Build tree
+           echo $f
+         elif test -f "$srcdir/$f"; then
+           # Source tree
+           echo $srcdir/$f
+         else
+           # /dev/null tree
+           { { echo "$as_me:$LINENO: error: cannot find input file: $f" >&5
+echo "$as_me: error: cannot find input file: $f" >&2;}
+   { (exit 1); exit 1; }; }
+         fi;;
+      esac
+    done` || { (exit 1); exit 1; }
+  # Remove the trailing spaces.
+  sed 's/[ 	]*$//' $ac_file_inputs >$tmp/in
+
+_ACEOF
+
+# Transform confdefs.h into two sed scripts, `conftest.defines' and
+# `conftest.undefs', that substitutes the proper values into
+# config.h.in to produce config.h.  The first handles `#define'
+# templates, and the second `#undef' templates.
+# And first: Protect against being on the right side of a sed subst in
+# config.status.  Protect against being in an unquoted here document
+# in config.status.
+rm -f conftest.defines conftest.undefs
+# Using a here document instead of a string reduces the quoting nightmare.
+# Putting comments in sed scripts is not portable.
+#
+# `end' is used to avoid that the second main sed command (meant for
+# 0-ary CPP macros) applies to n-ary macro definitions.
+# See the Autoconf documentation for `clear'.
+cat >confdef2sed.sed <<\_ACEOF
+s/[\\&,]/\\&/g
+s,[\\$`],\\&,g
+t clear
+: clear
+s,^[ 	]*#[ 	]*define[ 	][ 	]*\([^ 	(][^ 	(]*\)\(([^)]*)\)[ 	]*\(.*\)$,${ac_dA}\1${ac_dB}\1\2${ac_dC}\3${ac_dD},gp
+t end
+s,^[ 	]*#[ 	]*define[ 	][ 	]*\([^ 	][^ 	]*\)[ 	]*\(.*\)$,${ac_dA}\1${ac_dB}\1${ac_dC}\2${ac_dD},gp
+: end
+_ACEOF
+# If some macros were called several times there might be several times
+# the same #defines, which is useless.  Nevertheless, we may not want to
+# sort them, since we want the *last* AC-DEFINE to be honored.
+uniq confdefs.h | sed -n -f confdef2sed.sed >conftest.defines
+sed 's/ac_d/ac_u/g' conftest.defines >conftest.undefs
+rm -f confdef2sed.sed
+
+# This sed command replaces #undef with comments.  This is necessary, for
+# example, in the case of _POSIX_SOURCE, which is predefined and required
+# on some systems where configure will not decide to define it.
+cat >>conftest.undefs <<\_ACEOF
+s,^[ 	]*#[ 	]*undef[ 	][ 	]*[a-zA-Z_][a-zA-Z_0-9]*,/* & */,
+_ACEOF
+
+# Break up conftest.defines because some shells have a limit on the size
+# of here documents, and old seds have small limits too (100 cmds).
+echo '  # Handle all the #define templates only if necessary.' >>$CONFIG_STATUS
+echo '  if egrep "^[ 	]*#[ 	]*define" $tmp/in >/dev/null; then' >>$CONFIG_STATUS
+echo '  # If there are no defines, we may have an empty if/fi' >>$CONFIG_STATUS
+echo '  :' >>$CONFIG_STATUS
+rm -f conftest.tail
+while grep . conftest.defines >/dev/null
+do
+  # Write a limited-size here document to $tmp/defines.sed.
+  echo '  cat >$tmp/defines.sed <<CEOF' >>$CONFIG_STATUS
+  # Speed up: don't consider the non `#define' lines.
+  echo '/^[ 	]*#[ 	]*define/!b' >>$CONFIG_STATUS
+  # Work around the forget-to-reset-the-flag bug.
+  echo 't clr' >>$CONFIG_STATUS
+  echo ': clr' >>$CONFIG_STATUS
+  sed ${ac_max_here_lines}q conftest.defines >>$CONFIG_STATUS
+  echo 'CEOF
+  sed -f $tmp/defines.sed $tmp/in >$tmp/out
+  rm -f $tmp/in
+  mv $tmp/out $tmp/in
+' >>$CONFIG_STATUS
+  sed 1,${ac_max_here_lines}d conftest.defines >conftest.tail
+  rm -f conftest.defines
+  mv conftest.tail conftest.defines
+done
+rm -f conftest.defines
+echo '  fi # egrep' >>$CONFIG_STATUS
+echo >>$CONFIG_STATUS
+
+# Break up conftest.undefs because some shells have a limit on the size
+# of here documents, and old seds have small limits too (100 cmds).
+echo '  # Handle all the #undef templates' >>$CONFIG_STATUS
+rm -f conftest.tail
+while grep . conftest.undefs >/dev/null
+do
+  # Write a limited-size here document to $tmp/undefs.sed.
+  echo '  cat >$tmp/undefs.sed <<CEOF' >>$CONFIG_STATUS
+  # Speed up: don't consider the non `#undef'
+  echo '/^[ 	]*#[ 	]*undef/!b' >>$CONFIG_STATUS
+  # Work around the forget-to-reset-the-flag bug.
+  echo 't clr' >>$CONFIG_STATUS
+  echo ': clr' >>$CONFIG_STATUS
+  sed ${ac_max_here_lines}q conftest.undefs >>$CONFIG_STATUS
+  echo 'CEOF
+  sed -f $tmp/undefs.sed $tmp/in >$tmp/out
+  rm -f $tmp/in
+  mv $tmp/out $tmp/in
+' >>$CONFIG_STATUS
+  sed 1,${ac_max_here_lines}d conftest.undefs >conftest.tail
+  rm -f conftest.undefs
+  mv conftest.tail conftest.undefs
+done
+rm -f conftest.undefs
+
+cat >>$CONFIG_STATUS <<\_ACEOF
+  # Let's still pretend it is `configure' which instantiates (i.e., don't
+  # use $as_me), people would be surprised to read:
+  #    /* config.h.  Generated by config.status.  */
+  if test x"$ac_file" = x-; then
+    echo "/* Generated by configure.  */" >$tmp/config.h
+  else
+    echo "/* $ac_file.  Generated by configure.  */" >$tmp/config.h
+  fi
+  cat $tmp/in >>$tmp/config.h
+  rm -f $tmp/in
+  if test x"$ac_file" != x-; then
+    if cmp -s $ac_file $tmp/config.h 2>/dev/null; then
+      { echo "$as_me:$LINENO: $ac_file is unchanged" >&5
+echo "$as_me: $ac_file is unchanged" >&6;}
+    else
+      ac_dir=`(dirname "$ac_file") 2>/dev/null ||
+$as_expr X"$ac_file" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
+         X"$ac_file" : 'X\(//\)[^/]' \| \
+         X"$ac_file" : 'X\(//\)$' \| \
+         X"$ac_file" : 'X\(/\)' \| \
+         .     : '\(.\)' 2>/dev/null ||
+echo X"$ac_file" |
+    sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
+  	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
+  	  /^X\(\/\/\)$/{ s//\1/; q; }
+  	  /^X\(\/\).*/{ s//\1/; q; }
+  	  s/.*/./; q'`
+      { case "$ac_dir" in
+  [\\/]* | ?:[\\/]* ) as_incr_dir=;;
+  *)                      as_incr_dir=.;;
+esac
+as_dummy="$ac_dir"
+for as_mkdir_dir in `IFS='/\\'; set X $as_dummy; shift; echo "$@"`; do
+  case $as_mkdir_dir in
+    # Skip DOS drivespec
+    ?:) as_incr_dir=$as_mkdir_dir ;;
+    *)
+      as_incr_dir=$as_incr_dir/$as_mkdir_dir
+      test -d "$as_incr_dir" ||
+        mkdir "$as_incr_dir" ||
+	{ { echo "$as_me:$LINENO: error: cannot create \"$ac_dir\"" >&5
+echo "$as_me: error: cannot create \"$ac_dir\"" >&2;}
+   { (exit 1); exit 1; }; }
+    ;;
+  esac
+done; }
+
+      rm -f $ac_file
+      mv $tmp/config.h $ac_file
+    fi
+  else
+    cat $tmp/config.h
+    rm -f $tmp/config.h
+  fi
+  # Run the commands associated with the file.
+  case $ac_file in
+    include/vaucanson/config/config.hh ) # update the timestamp
+echo 'timestamp for include/vaucanson/config/config.hh' >"include/vaucanson/config/stamp-h1"
+ ;;
+  esac
 done
 _ACEOF
 cat >>$CONFIG_STATUS <<\_ACEOF
Index: Makefile.in
--- Makefile.in Wed, 24 Jul 2002 17:33:25 +0200 yann (vaucanson/42_Makefile.i 1.5 600)
+++ Makefile.in Thu, 25 Jul 2002 18:24:57 +0200 yann (vaucanson/42_Makefile.i 1.5 600)
@@ -87,6 +87,7 @@
 subdir = .
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
+CONFIG_HEADER = $(top_builddir)/include/vaucanson/config/config.hh
 CONFIG_CLEAN_FILES =
 DIST_SOURCES =
 
@@ -94,9 +95,10 @@
 	uninstall-info-recursive all-recursive install-data-recursive \
 	install-exec-recursive installdirs-recursive install-recursive \
 	uninstall-recursive check-recursive installcheck-recursive
-DIST_COMMON = README ChangeLog Makefile.am Makefile.in THANKS \
-	aclocal.m4 config.guess config.sub configure configure.ac \
-	depcomp install-sh missing mkinstalldirs
+DIST_COMMON = README ./include/vaucanson/config/config.hh.in ChangeLog \
+	Makefile.am Makefile.in THANKS aclocal.m4 config.guess \
+	config.sub configure configure.ac depcomp install-sh missing \
+	mkinstalldirs
 DIST_SUBDIRS = $(SUBDIRS)
 all: all-recursive
 
@@ -116,6 +118,23 @@
 
 $(ACLOCAL_M4):  configure.ac 
 	cd $(srcdir) && $(ACLOCAL) $(ACLOCAL_AMFLAGS)
+
+include/vaucanson/config/config.hh: include/vaucanson/config/stamp-h1
+	@if test ! -f $@; then \
+	  rm -f include/vaucanson/config/stamp-h1; \
+	  $(MAKE) include/vaucanson/config/stamp-h1; \
+	else :; fi
+
+include/vaucanson/config/stamp-h1: $(srcdir)/./include/vaucanson/config/config.hh.in $(top_builddir)/config.status
+	@rm -f include/vaucanson/config/stamp-h1
+	cd $(top_builddir) && $(SHELL) ./config.status include/vaucanson/config/config.hh
+
+$(srcdir)/./include/vaucanson/config/config.hh.in:  $(top_srcdir)/configure.ac $(ACLOCAL_M4) 
+	cd $(top_srcdir) && $(AUTOHEADER)
+	touch $(srcdir)/./include/vaucanson/config/config.hh.in
+
+distclean-hdr:
+	-rm -f include/vaucanson/config/config.hh include/vaucanson/config/stamp-h1
 uninstall-info-am:
 
 # This directory's subdirectories are mostly independent; you can cd
@@ -229,6 +248,7 @@
 distdir: $(DISTFILES)
 	$(am__remove_distdir)
 	mkdir $(distdir)
+	$(mkinstalldirs) $(distdir)/./include/vaucanson/config
 	@list='$(DISTFILES)'; for file in $$list; do \
 	  if test -f $$file || test -d $$file; then d=.; else d=$(srcdir); fi; \
 	  dir=`echo "$$file" | sed -e 's,/[^/]*$$,,'`; \
@@ -350,7 +370,7 @@
 
 distclean: distclean-recursive
 	-rm -f $(am__CONFIG_DISTCLEAN_FILES)
-distclean-am: clean-am distclean-generic distclean-tags
+distclean-am: clean-am distclean-generic distclean-hdr distclean-tags
 
 dvi: dvi-recursive
 
@@ -385,18 +405,19 @@
 
 .PHONY: $(RECURSIVE_TARGETS) GTAGS all all-am check check-am clean \
 	clean-generic clean-recursive dist dist-all dist-gzip distcheck \
-	distclean distclean-generic distclean-recursive distclean-tags \
-	distcleancheck distdir dvi dvi-am dvi-recursive info info-am \
-	info-recursive install install-am install-data install-data-am \
-	install-data-recursive install-exec install-exec-am \
-	install-exec-recursive install-info install-info-am \
-	install-info-recursive install-man install-recursive \
-	install-strip installcheck installcheck-am installdirs \
-	installdirs-am installdirs-recursive maintainer-clean \
-	maintainer-clean-generic maintainer-clean-recursive mostlyclean \
-	mostlyclean-generic mostlyclean-recursive tags tags-recursive \
-	uninstall uninstall-am uninstall-info-am \
-	uninstall-info-recursive uninstall-recursive
+	distclean distclean-generic distclean-hdr distclean-recursive \
+	distclean-tags distcleancheck distdir dvi dvi-am dvi-recursive \
+	info info-am info-recursive install install-am install-data \
+	install-data-am install-data-recursive install-exec \
+	install-exec-am install-exec-recursive install-info \
+	install-info-am install-info-recursive install-man \
+	install-recursive install-strip installcheck installcheck-am \
+	installdirs installdirs-am installdirs-recursive \
+	maintainer-clean maintainer-clean-generic \
+	maintainer-clean-recursive mostlyclean mostlyclean-generic \
+	mostlyclean-recursive tags tags-recursive uninstall \
+	uninstall-am uninstall-info-am uninstall-info-recursive \
+	uninstall-recursive
 
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
 # Otherwise a system limit (for SysV at least) may be exceeded.
Index: aclocal.m4
--- aclocal.m4 Wed, 24 Jul 2002 17:33:25 +0200 yann (vaucanson/45_aclocal.m4 1.7 600)
+++ aclocal.m4 Thu, 25 Jul 2002 18:24:56 +0200 yann (vaucanson/45_aclocal.m4 1.7 600)
@@ -11,6 +11,84 @@
 # even the implied warranty of MERCHANTABILITY or FITNESS FOR A
 # PARTICULAR PURPOSE.
 
+# Like AC_CONFIG_HEADER, but automatically create stamp file. -*- Autoconf -*-
+
+# Copyright 1996, 1997, 2000, 2001 Free Software Foundation, Inc.
+
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2, or (at your option)
+# any later version.
+
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU General Public License for more details.
+
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
+# 02111-1307, USA.
+
+AC_PREREQ([2.52])
+
+# serial 6
+
+# When config.status generates a header, we must update the stamp-h file.
+# This file resides in the same directory as the config header
+# that is generated.  We must strip everything past the first ":",
+# and everything past the last "/".
+
+# _AM_DIRNAME(PATH)
+# -----------------
+# Like AS_DIRNAME, only do it during macro expansion
+AC_DEFUN([_AM_DIRNAME],
+       [m4_if(regexp([$1], [^.*[^/]//*[^/][^/]*/*$]), -1,
+	      m4_if(regexp([$1], [^//\([^/]\|$\)]), -1,
+		    m4_if(regexp([$1], [^/.*]), -1,
+			  [.],
+			  patsubst([$1], [^\(/\).*], [\1])),
+		    patsubst([$1], [^\(//\)\([^/].*\|$\)], [\1])),
+	      patsubst([$1], [^\(.*[^/]\)//*[^/][^/]*/*$], [\1]))[]dnl
+])# _AM_DIRNAME
+
+
+# The stamp files are numbered to have different names.
+# We could number them on a directory basis, but that's additional
+# complications, let's have a unique counter.
+m4_define([_AM_STAMP_Count], [0])
+
+
+# _AM_STAMP(HEADER)
+# -----------------
+# The name of the stamp file for HEADER.
+AC_DEFUN([_AM_STAMP],
+[m4_define([_AM_STAMP_Count], m4_incr(_AM_STAMP_Count))dnl
+AS_ESCAPE(_AM_DIRNAME(patsubst([$1],
+                               [:.*])))/stamp-h[]_AM_STAMP_Count])
+
+
+# _AM_CONFIG_HEADER(HEADER[:SOURCES], COMMANDS, INIT-COMMANDS)
+# ------------------------------------------------------------
+# We used to try to get a real timestamp in stamp-h.  But the fear is that
+# that will cause unnecessary cvs conflicts.
+AC_DEFUN([_AM_CONFIG_HEADER],
+[# Add the stamp file to the list of files AC keeps track of,
+# along with our hook.
+AC_CONFIG_HEADERS([$1],
+                  [# update the timestamp
+echo 'timestamp for $1' >"_AM_STAMP([$1])"
+$2],
+                  [$3])
+])# _AM_CONFIG_HEADER
+
+
+# AM_CONFIG_HEADER(HEADER[:SOURCES]..., COMMANDS, INIT-COMMANDS)
+# --------------------------------------------------------------
+AC_DEFUN([AM_CONFIG_HEADER],
+[AC_FOREACH([_AM_File], [$1], [_AM_CONFIG_HEADER(_AM_File, [$2], [$3])])
+])# AM_CONFIG_HEADER
+
 # Do all the work for Automake.                            -*- Autoconf -*-
 
 # This macro actually does too much some checks are only needed if
Index: configure.ac
--- configure.ac Wed, 24 Jul 2002 17:33:25 +0200 yann (vaucanson/47_configure. 1.6.1.3 600)
+++ configure.ac Thu, 25 Jul 2002 18:06:40 +0200 yann (vaucanson/47_configure. 1.6.1.3 600)
@@ -7,13 +7,15 @@
 AC_PREREQ([2.50])
 AC_INIT([vaucanson], [0.1.0], [vaucanson-bugs@lrde.epita.fr])
 AC_CONFIG_SRCDIR([ChangeLog])
-
+AM_CONFIG_HEADER(include/vaucanson/config/config.hh)
 AM_INIT_AUTOMAKE(AC_PACKAGE_NAME, AC_PACKAGE_VERSION)
 
 AC_PROG_CXX
 AC_PROG_RANLIB
-
 AC_LANG(C++)
+
+AC_CHECK_HEADERS([limits])
+AC_CHECK_HEADERS([stl_config.h])
 
 AC_CONFIG_FILES([
 	Makefile
Index: include/Makefile.in
--- include/Makefile.in Wed, 24 Jul 2002 17:33:25 +0200 yann (vaucanson/49_Makefile.i 1.6 600)
+++ include/Makefile.in Thu, 25 Jul 2002 18:25:04 +0200 yann (vaucanson/49_Makefile.i 1.6 600)
@@ -243,6 +243,7 @@
 
 subdir = include
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
+CONFIG_HEADER = $(top_builddir)/include/vaucanson/config/config.hh
 CONFIG_CLEAN_FILES =
 DIST_SOURCES =
 HEADERS = $(nobase_include_HEADERS)
Index: src/Makefile.in
--- src/Makefile.in Wed, 24 Jul 2002 17:33:25 +0200 yann (vaucanson/50_Makefile.i 1.2 600)
+++ src/Makefile.in Thu, 25 Jul 2002 18:07:56 +0200 yann (vaucanson/50_Makefile.i 1.2 600)
@@ -84,6 +84,7 @@
 SUBDIRS = tests
 subdir = src
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
+CONFIG_HEADER = $(top_builddir)/include/vaucanson/config/config.hh
 CONFIG_CLEAN_FILES =
 DIST_SOURCES =
 
Index: src/tests/Makefile.in
--- src/tests/Makefile.in Wed, 24 Jul 2002 17:33:25 +0200 yann (vaucanson/b/0_Makefile.i 1.5 600)
+++ src/tests/Makefile.in Thu, 25 Jul 2002 18:07:57 +0200 yann (vaucanson/b/0_Makefile.i 1.5 600)
@@ -91,6 +91,7 @@
 
 subdir = src/tests
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
+CONFIG_HEADER = $(top_builddir)/include/vaucanson/config/config.hh
 CONFIG_CLEAN_FILES =
 DIST_SOURCES =
 
Index: src/tests/check/tests_stuff.cc
--- src/tests/check/tests_stuff.cc Tue, 23 Jul 2002 14:46:29 +0200 yann (vaucanson/b/3_tests_stuf 1.7 600)
+++ src/tests/check/tests_stuff.cc Thu, 25 Jul 2002 18:30:15 +0200 yann (vaucanson/b/3_tests_stuf 1.7 600)
@@ -18,12 +18,12 @@
 // License along with this library; if not, write to the Free Software
 // Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 
-
+#include <iomanip>
 #include "tests_stuff.hh"
 
 namespace tests {
 
-  const unsigned Tester::nb_col_msg = 60;
+  const unsigned Tester::nb_col_msg = 50;
 
   Tester::Tester(verbose_level_e verbose_level) : 
     passed_ (0),
@@ -41,14 +41,7 @@
   Tester::ok(std::string test_label)
   {
     if (verbose_ != none)
-      {
-	std::cout << "TEST: ";
-	std::cout.fill(' ') ;
-	int last = std::cout.width(nb_col_msg);
-	std::cout << test_label;
-	std::cout << " : OK" << std::endl;
-	std::cout.width(last);
-      }
+      std::cout << "TEST: [OK]   " << test_label << std::endl;
     passed_++;
   }
 
@@ -56,14 +49,7 @@
   Tester::ko(std::string test_label)
   {
     if (verbose_ != none)
-      {
-	std::cout << "TEST: ";
-	std::cout.fill(' ') ;
-	int last = std::cout.width(nb_col_msg);
-	std::cout << test_label;
-	std::cout << " : KO" << std::endl;
-	std::cout.width(last);
-      }
+      std::cout << "TEST: [KO]   " << test_label << std::endl;
     non_passed_++;
   }
   
Index: src/tests/check/Makefile.in
--- src/tests/check/Makefile.in Wed, 24 Jul 2002 17:33:25 +0200 yann (vaucanson/b/4_Makefile.i 1.6 600)
+++ src/tests/check/Makefile.in Thu, 25 Jul 2002 19:40:56 +0200 yann (vaucanson/b/4_Makefile.i 1.6 600)
@@ -18,7 +18,8 @@
 #
 # $Id$
 
-# -*- Makefile -*-
+# Makefile.flags -*- Makefile -*-
+# $Id$
 SHELL = @SHELL@
 
 srcdir = @srcdir@
@@ -82,7 +83,7 @@
 am__quote = @am__quote@
 install_sh = @install_sh@
 
-AM_CXXFLAGS = -Wall -W -Wno-unused -O2
+AM_CXXFLAGS = -Wall -W -Wno-unused -O2 -ftemplate-depth-99
 AM_CPPFLAGS = -I$(top_srcdir)/include -I$(top_srcdir)/src/tests/
 
 check_LIBRARIES = libcheck.a
@@ -95,6 +96,7 @@
 EXTRA_DIST = Makefile.flags Makefile.check
 subdir = src/tests/check
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
+CONFIG_HEADER = $(top_builddir)/include/vaucanson/config/config.hh
 CONFIG_CLEAN_FILES =
 libcheck_a_AR = $(AR) cru
 libcheck_a_LIBADD =
@@ -102,7 +104,7 @@
 libcheck_a_OBJECTS = $(am_libcheck_a_OBJECTS)
 
 DEFS = @DEFS@
-DEFAULT_INCLUDES =  -I. -I$(srcdir)
+DEFAULT_INCLUDES =  -I. -I$(srcdir) -I$(top_builddir)/include/vaucanson/config
 CPPFLAGS = @CPPFLAGS@
 LDFLAGS = @LDFLAGS@
 LIBS = @LIBS@
Index: src/tests/check/Makefile.flags
--- src/tests/check/Makefile.flags Wed, 24 Jul 2002 17:33:25 +0200 yann (vaucanson/b/5_Makefile.f 1.5 600)
+++ src/tests/check/Makefile.flags Thu, 25 Jul 2002 19:40:51 +0200 yann (vaucanson/b/5_Makefile.f 1.5 600)
@@ -1,4 +1,5 @@
-# -*- Makefile -*-
+# Makefile.flags -*- Makefile -*-
+# $Id$
 
-AM_CXXFLAGS = -Wall -W -Wno-unused -O2
+AM_CXXFLAGS = -Wall -W -Wno-unused -O2 -ftemplate-depth-99
 AM_CPPFLAGS = -I$(top_srcdir)/include -I$(top_srcdir)/src/tests/
Index: src/tests/fundamental/Makefile.in
--- src/tests/fundamental/Makefile.in Wed, 24 Jul 2002 17:33:25 +0200 yann (vaucanson/b/8_Makefile.i 1.6 600)
+++ src/tests/fundamental/Makefile.in Thu, 25 Jul 2002 19:43:45 +0200 yann (vaucanson/b/8_Makefile.i 1.6 600)
@@ -25,7 +25,8 @@
 # $Id$
 # VCSN_HEADER
 
-# -*- Makefile -*-
+# Makefile.flags -*- Makefile -*-
+# $Id$
 SHELL = @SHELL@
 
 srcdir = @srcdir@
@@ -89,7 +90,7 @@
 am__quote = @am__quote@
 install_sh = @install_sh@
 
-AM_CXXFLAGS = -Wall -W -Wno-unused -O2
+AM_CXXFLAGS = -Wall -W -Wno-unused -O2 -ftemplate-depth-99
 AM_CPPFLAGS = -I$(top_srcdir)/include -I$(top_srcdir)/src/tests/
 
 LDADD = $(top_builddir)/src/tests/check/libcheck.a
@@ -104,6 +105,7 @@
 EXTRA_DIST = design_pattern-test.hh
 subdir = src/tests/fundamental
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
+CONFIG_HEADER = $(top_builddir)/include/vaucanson/config/config.hh
 CONFIG_CLEAN_FILES =
 check_PROGRAMS = element-full-test$(EXEEXT)
 am_element_full_test_OBJECTS = element-full-test.$(OBJEXT)
@@ -114,7 +116,7 @@
 element_full_test_LDFLAGS =
 
 DEFS = @DEFS@
-DEFAULT_INCLUDES =  -I. -I$(srcdir)
+DEFAULT_INCLUDES =  -I. -I$(srcdir) -I$(top_builddir)/include/vaucanson/config
 CPPFLAGS = @CPPFLAGS@
 LDFLAGS = @LDFLAGS@
 LIBS = @LIBS@
Index: include/vaucanson/misc/numerical_constraints.hh
--- include/vaucanson/misc/numerical_constraints.hh Tue, 23 Jul 2002 14:46:29 +0200 yann (vaucanson/b/20_numerical_ 1.2 600)
+++ include/vaucanson/misc/numerical_constraints.hh Thu, 25 Jul 2002 19:55:35 +0200 yann (vaucanson/b/20_numerical_ 1.2 600)
@@ -19,11 +19,15 @@
 // License along with this library; if not, write to the Free Software
 // Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 
-
 #ifndef UTILITY_NUMERICAL_CONSTRAINTS_HH
 # define UTILITY_NUMERICAL_CONSTRAINTS_HH
 
+# include <vaucanson/config/system.hh>
+# ifdef HAVE_LIMITS
 # include <limits>
+# else
+#  include <vaucanson/misc/limits.hh>
+# endif // HAVE_LIMITS
 # include <vaucanson/misc/misc_constraints.hh>
 
 namespace utility {
Index: src/tests/algebra/Makefile.in
--- src/tests/algebra/Makefile.in Wed, 24 Jul 2002 17:33:25 +0200 yann (vaucanson/b/24_Makefile.i 1.6 600)
+++ src/tests/algebra/Makefile.in Thu, 25 Jul 2002 18:08:01 +0200 yann (vaucanson/b/24_Makefile.i 1.6 600)
@@ -89,6 +89,7 @@
 
 subdir = src/tests/algebra
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
+CONFIG_HEADER = $(top_builddir)/include/vaucanson/config/config.hh
 CONFIG_CLEAN_FILES =
 DIST_SOURCES =
 
Index: src/tests/algebra/semiring/Makefile.in
--- src/tests/algebra/semiring/Makefile.in Wed, 24 Jul 2002 17:33:25 +0200 yann (vaucanson/b/25_Makefile.i 1.5 600)
+++ src/tests/algebra/semiring/Makefile.in Thu, 25 Jul 2002 19:43:47 +0200 yann (vaucanson/b/25_Makefile.i 1.5 600)
@@ -25,7 +25,8 @@
 # $Id$
 # VCSN_HEADER
 
-# -*- Makefile -*-
+# Makefile.flags -*- Makefile -*-
+# $Id$
 SHELL = @SHELL@
 
 srcdir = @srcdir@
@@ -89,7 +90,7 @@
 am__quote = @am__quote@
 install_sh = @install_sh@
 
-AM_CXXFLAGS = -Wall -W -Wno-unused -O2
+AM_CXXFLAGS = -Wall -W -Wno-unused -O2 -ftemplate-depth-99
 AM_CPPFLAGS = -I$(top_srcdir)/include -I$(top_srcdir)/src/tests/
 
 LDADD = $(top_builddir)/src/tests/check/libcheck.a
@@ -106,6 +107,7 @@
 EXTRA_DIST = semiring-test.hh
 subdir = src/tests/algebra/semiring
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
+CONFIG_HEADER = $(top_builddir)/include/vaucanson/config/config.hh
 CONFIG_CLEAN_FILES =
 check_PROGRAMS = semiring-numerical-test$(EXEEXT) \
 	semiring-tropical-test$(EXEEXT)
@@ -123,7 +125,7 @@
 semiring_tropical_test_LDFLAGS =
 
 DEFS = @DEFS@
-DEFAULT_INCLUDES =  -I. -I$(srcdir)
+DEFAULT_INCLUDES =  -I. -I$(srcdir) -I$(top_builddir)/include/vaucanson/config
 CPPFLAGS = @CPPFLAGS@
 LDFLAGS = @LDFLAGS@
 LIBS = @LIBS@
Index: src/tests/algebra/semiring/semiring-test.hh
--- src/tests/algebra/semiring/semiring-test.hh Tue, 23 Jul 2002 14:46:29 +0200 yann (vaucanson/b/29_semiring-t 1.4 600)
+++ src/tests/algebra/semiring/semiring-test.hh Thu, 25 Jul 2002 17:07:29 +0200 yann (vaucanson/b/29_semiring-t 1.4 600)
@@ -19,7 +19,6 @@
 // License along with this library; if not, write to the Free Software
 // Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 
-
 #ifndef SEMIRING_TEST_HH
 # define SEMIRING_TEST_HH
 
Index: include/vaucanson/algebra/concrete/semiring/tropical_semiring.hxx
--- include/vaucanson/algebra/concrete/semiring/tropical_semiring.hxx Tue, 23 Jul 2002 14:46:29 +0200 yann (vaucanson/b/31_tropical_s 1.2 600)
+++ include/vaucanson/algebra/concrete/semiring/tropical_semiring.hxx Thu, 25 Jul 2002 19:55:42 +0200 yann (vaucanson/b/31_tropical_s 1.2 600)
@@ -21,9 +21,12 @@
 
 #ifndef ALGEBRA_TROPICAL_SEMIRING_HXX
 # define ALGEBRA_TROPICAL_SEMIRING_HXX
-
+# include <vaucanson/config/system.hh>
+# ifdef HAVE_LIMITS
 # include <limits>
-
+# else
+#  include <vaucanson/misc/limits.hh>
+# endif // HAVE_LIMITS
 # include <vaucanson/algebra/concrete/semiring/tropical_semiring.hh>
 
 namespace vcsn {
Index: src/tests/algebra/alphabets/alphabets-basic-test.cc
--- src/tests/algebra/alphabets/alphabets-basic-test.cc Tue, 23 Jul 2002 14:46:29 +0200 yann (vaucanson/b/33_alphabets- 1.8 600)
+++ src/tests/algebra/alphabets/alphabets-basic-test.cc Thu, 25 Jul 2002 17:28:30 +0200 yann (vaucanson/b/33_alphabets- 1.8 600)
@@ -17,11 +17,10 @@
 // License along with this library; if not, write to the Free Software
 // Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 
-
-
-#include <set>
-#include <check/tests_stuff.hh>
+#include <vaucanson/config/system.hh>
 #include <fundamental/design_pattern-test.hh>
+#include <check/tests_stuff.hh>
+#include <set>
 #include <vaucanson/fundamental/fundamental.hh>
 #include <vaucanson/algebra/concrete/alphabets/set_alphabet.hh>
 
Index: src/tests/algebra/alphabets/Makefile.in
--- src/tests/algebra/alphabets/Makefile.in Wed, 24 Jul 2002 17:33:25 +0200 yann (vaucanson/b/34_Makefile.i 1.6 600)
+++ src/tests/algebra/alphabets/Makefile.in Thu, 25 Jul 2002 19:43:51 +0200 yann (vaucanson/b/34_Makefile.i 1.6 600)
@@ -24,7 +24,8 @@
 # $Id$
 # VCSN_HEADER
 
-# -*- Makefile -*-
+# Makefile.flags -*- Makefile -*-
+# $Id$
 SHELL = @SHELL@
 
 srcdir = @srcdir@
@@ -88,7 +89,7 @@
 am__quote = @am__quote@
 install_sh = @install_sh@
 
-AM_CXXFLAGS = -Wall -W -Wno-unused -O2
+AM_CXXFLAGS = -Wall -W -Wno-unused -O2 -ftemplate-depth-99
 AM_CPPFLAGS = -I$(top_srcdir)/include -I$(top_srcdir)/src/tests/
 
 LDADD = $(top_builddir)/src/tests/check/libcheck.a
@@ -101,6 +102,7 @@
 alphabets_basic_test_SOURCES = alphabets-basic-test.cc
 subdir = src/tests/algebra/alphabets
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
+CONFIG_HEADER = $(top_builddir)/include/vaucanson/config/config.hh
 CONFIG_CLEAN_FILES =
 check_PROGRAMS = alphabets-basic-test$(EXEEXT)
 am_alphabets_basic_test_OBJECTS = alphabets-basic-test.$(OBJEXT)
@@ -111,7 +113,7 @@
 alphabets_basic_test_LDFLAGS =
 
 DEFS = @DEFS@
-DEFAULT_INCLUDES =  -I. -I$(srcdir)
+DEFAULT_INCLUDES =  -I. -I$(srcdir) -I$(top_builddir)/include/vaucanson/config
 CPPFLAGS = @CPPFLAGS@
 LDFLAGS = @LDFLAGS@
 LIBS = @LIBS@
Index: include/vaucanson/algebra/concept/freemonoid_base.hxx
--- include/vaucanson/algebra/concept/freemonoid_base.hxx Tue, 23 Jul 2002 14:46:29 +0200 yann (vaucanson/c/0_freemonoid 1.3 600)
+++ include/vaucanson/algebra/concept/freemonoid_base.hxx Thu, 25 Jul 2002 17:44:47 +0200 yann (vaucanson/c/0_freemonoid 1.3 600)
@@ -64,70 +64,70 @@
     size_t 
     MetaElement<FreeMonoidBase<Self>, T>::length() const
     { 
-      return op_size(set(), value()); 
+      return op_size(this->set(), this->value()); 
     }
 
     template<class Self, typename T>
     void
     MetaElement<FreeMonoidBase<Self>, T>::mirror()
     {
-      op_in_mirror(set(), value());
+      op_in_mirror(this->set(), this->value());
     }
 
     template<class Self, typename T>
     typename MetaElement<FreeMonoidBase<Self>, T>::iterator 
     MetaElement<FreeMonoidBase<Self>, T>::begin() 
     { 
-      return op_begin(set(), value()); 
+      return op_begin(this->set(), this->value()); 
     }
     
     template<class Self, typename T>
     typename MetaElement<FreeMonoidBase<Self>, T>::const_iterator 
     MetaElement<FreeMonoidBase<Self>, T>::begin() const
     { 
-      return op_begin(set(), value()); 
+      return op_begin(this->set(), this->value()); 
     }
     
     template<class Self, typename T>
     typename MetaElement<FreeMonoidBase<Self>, T>::reverse_iterator 
     MetaElement<FreeMonoidBase<Self>, T>::rbegin()
     { 
-      return op_rbegin(set(), value()); 
+      return op_rbegin(this->set(), this->value()); 
     }
     
     template<class Self, typename T>
     typename MetaElement<FreeMonoidBase<Self>, T>::const_reverse_iterator 
     MetaElement<FreeMonoidBase<Self>, T>::rbegin() const
     { 
-      return op_rbegin(set(), value()); 
+      return op_rbegin(this->set(), this->value()); 
     }
     
     template<class Self, typename T>
     typename MetaElement<FreeMonoidBase<Self>, T>::iterator 
     MetaElement<FreeMonoidBase<Self>, T>::end() 
     { 
-      return op_end(set(), value()); 
+      return op_end(this->set(), this->value()); 
     }
     
     template<class Self, typename T>
     typename MetaElement<FreeMonoidBase<Self>, T>::const_iterator 
     MetaElement<FreeMonoidBase<Self>, T>::end() const
     { 
-      return op_end(set(), value()); 
+      return op_end(this->set(), this->value()); 
     }
     
     template<class Self, typename T>
     typename MetaElement<FreeMonoidBase<Self>, T>::reverse_iterator 
     MetaElement<FreeMonoidBase<Self>, T>::rend()
     { 
-      return op_rend(set(), value()); 
+      return op_rend(this->set(), this->value()); 
     }
     
     template<class Self, typename T>
     typename MetaElement<FreeMonoidBase<Self>, T>::const_reverse_iterator 
     MetaElement<FreeMonoidBase<Self>, T>::rend() const
     { 
-      return op_rend(set(), value()); 
+      return op_rend(this->set(), this->value()); 
     }
 
     template<class Self, typename T>
Index: include/vaucanson/algebra/concrete/free_monoid/str_words.hxx
--- include/vaucanson/algebra/concrete/free_monoid/str_words.hxx Tue, 23 Jul 2002 14:46:29 +0200 yann (vaucanson/c/4_str_words. 1.4 600)
+++ include/vaucanson/algebra/concrete/free_monoid/str_words.hxx Thu, 25 Jul 2002 11:21:41 +0200 yann (vaucanson/c/4_str_words. 1.4 600)
@@ -68,7 +68,7 @@
 	    SELECTOR(std::basic_string<typename A::letter_t>))
   {
     // FIXME : use global constants to define this !
-    unsigned length = ((unsigned) trunc(((float) random() / (float) RAND_MAX) * 5));
+    unsigned length = ((unsigned) trunc(((float) rand() / (float) RAND_MAX) * 5));
     std::basic_string<typename A::letter_t> r;
     for (unsigned i = 0; i < length; ++i)
       r = r + s.alphabet().choose();
Index: src/tests/algebra/free_monoid/Makefile.in
--- src/tests/algebra/free_monoid/Makefile.in Wed, 24 Jul 2002 17:33:25 +0200 yann (vaucanson/c/9_Makefile.i 1.4 600)
+++ src/tests/algebra/free_monoid/Makefile.in Thu, 25 Jul 2002 19:43:54 +0200 yann (vaucanson/c/9_Makefile.i 1.4 600)
@@ -24,7 +24,8 @@
 # $Id$
 # VCSN_HEADER
 
-# -*- Makefile -*-
+# Makefile.flags -*- Makefile -*-
+# $Id$
 SHELL = @SHELL@
 
 srcdir = @srcdir@
@@ -88,7 +89,7 @@
 am__quote = @am__quote@
 install_sh = @install_sh@
 
-AM_CXXFLAGS = -Wall -W -Wno-unused -O2
+AM_CXXFLAGS = -Wall -W -Wno-unused -O2 -ftemplate-depth-99
 AM_CPPFLAGS = -I$(top_srcdir)/include -I$(top_srcdir)/src/tests/
 
 LDADD = $(top_builddir)/src/tests/check/libcheck.a
@@ -101,6 +102,7 @@
 free_monoid_test_SOURCES = free_monoid-test.cc
 subdir = src/tests/algebra/free_monoid
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
+CONFIG_HEADER = $(top_builddir)/include/vaucanson/config/config.hh
 CONFIG_CLEAN_FILES =
 check_PROGRAMS = free-monoid-test$(EXEEXT)
 am_free_monoid_test_OBJECTS = free_monoid-test.$(OBJEXT)
@@ -111,7 +113,7 @@
 free_monoid_test_LDFLAGS =
 
 DEFS = @DEFS@
-DEFAULT_INCLUDES =  -I. -I$(srcdir)
+DEFAULT_INCLUDES =  -I. -I$(srcdir) -I$(top_builddir)/include/vaucanson/config
 CPPFLAGS = @CPPFLAGS@
 LDFLAGS = @LDFLAGS@
 LIBS = @LIBS@
Index: src/tests/algebra/series/Makefile.in
--- src/tests/algebra/series/Makefile.in Wed, 24 Jul 2002 17:33:25 +0200 yann (vaucanson/c/20_Makefile.i 1.5 600)
+++ src/tests/algebra/series/Makefile.in Thu, 25 Jul 2002 19:43:57 +0200 yann (vaucanson/c/20_Makefile.i 1.5 600)
@@ -24,7 +24,8 @@
 # $Id$
 # VCSN_HEADER
 
-# -*- Makefile -*-
+# Makefile.flags -*- Makefile -*-
+# $Id$
 SHELL = @SHELL@
 
 srcdir = @srcdir@
@@ -88,7 +89,7 @@
 am__quote = @am__quote@
 install_sh = @install_sh@
 
-AM_CXXFLAGS = -Wall -W -Wno-unused -O2
+AM_CXXFLAGS = -Wall -W -Wno-unused -O2 -ftemplate-depth-99
 AM_CPPFLAGS = -I$(top_srcdir)/include -I$(top_srcdir)/src/tests/
 
 LDADD = $(top_builddir)/src/tests/check/libcheck.a
@@ -106,6 +107,7 @@
 EXTRA_DIST = series-test.hh 
 subdir = src/tests/algebra/series
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
+CONFIG_HEADER = $(top_builddir)/include/vaucanson/config/config.hh
 CONFIG_CLEAN_FILES =
 check_PROGRAMS = series-test$(EXEEXT) krat-test$(EXEEXT)
 am_krat_test_OBJECTS = krat-test.$(OBJEXT)
@@ -120,7 +122,7 @@
 series_test_LDFLAGS =
 
 DEFS = @DEFS@
-DEFAULT_INCLUDES =  -I. -I$(srcdir)
+DEFAULT_INCLUDES =  -I. -I$(srcdir) -I$(top_builddir)/include/vaucanson/config
 CPPFLAGS = @CPPFLAGS@
 LDFLAGS = @LDFLAGS@
 LIBS = @LIBS@
Index: src/tests/algebra/series/series-test.cc
--- src/tests/algebra/series/series-test.cc Tue, 23 Jul 2002 14:46:29 +0200 yann (vaucanson/c/21_series-tes 1.6 600)
+++ src/tests/algebra/series/series-test.cc Thu, 25 Jul 2002 17:55:45 +0200 yann (vaucanson/c/21_series-tes 1.6 600)
@@ -19,7 +19,7 @@
 // License along with this library; if not, write to the Free Software
 // Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 
-
+#include <vaucanson/config/system.hh>
 #include <set>
 #include <check/tests_stuff.hh>
 #include <fundamental/design_pattern-test.hh>
Index: src/tests/algebra/series/series-test.hh
--- src/tests/algebra/series/series-test.hh Tue, 23 Jul 2002 14:46:29 +0200 yann (vaucanson/c/27_series-tes 1.5 600)
+++ src/tests/algebra/series/series-test.hh Thu, 25 Jul 2002 17:55:22 +0200 yann (vaucanson/c/27_series-tes 1.5 600)
@@ -23,6 +23,7 @@
 #ifndef SERIES_TEST_HH
 # define SERIES_TEST_HH
 
+# include <vaucanson/config/system.hh>
 # include <check/tests_stuff.hh>
 # include <fundamental/design_pattern-test.hh>
 # include <vaucanson/fundamental/fundamental.hh>
Index: include/vaucanson/automata/concrete/manylinks_states.hh
--- include/vaucanson/automata/concrete/manylinks_states.hh Tue, 23 Jul 2002 14:46:29 +0200 yann (vaucanson/c/36_manylinks_ 1.4 600)
+++ include/vaucanson/automata/concrete/manylinks_states.hh Thu, 25 Jul 2002 09:41:23 +0200 yann (vaucanson/c/36_manylinks_ 1.4 600)
@@ -21,6 +21,7 @@
 #ifndef AUTOMATA_MANYLINKS_STATES_HH
 # define AUTOMATA_MANYLINKS_STATES_HH
 
+# include <vaucanson/config/system.hh>
 #include <iterator>
 #include <vaucanson/automata/concrete/manylinks_edges.hh>
 
@@ -184,11 +185,11 @@
   | State iterator |
   `---------------*/
   template<typename State, state_link_type kind>
-  class state_iterator : public std::iterator<std::bidirectional_iterator_tag,
+  class state_iterator /* : public std::iterator<std::bidirectional_iterator_tag,
 					     unsigned,
 					     ptrdiff_t,
 					     const unsigned*,
-					     const unsigned&>
+					     const unsigned&> */
   {
   public:
     
Index: include/vaucanson/automata/concrete/manylinks_edges.hh
--- include/vaucanson/automata/concrete/manylinks_edges.hh Tue, 23 Jul 2002 14:46:29 +0200 yann (vaucanson/c/38_manylinks_ 1.3 600)
+++ include/vaucanson/automata/concrete/manylinks_edges.hh Thu, 25 Jul 2002 19:58:49 +0200 yann (vaucanson/c/38_manylinks_ 1.3 600)
@@ -21,6 +21,7 @@
 #ifndef AUTOMATA_MANYLINKS_EDGES_HH
 #define AUTOMATA_MANYLINKS_EDGES_HH
 
+# include <vaucanson/config/system.hh>
 #include <iterator>
 
 namespace vcsn
@@ -173,11 +174,11 @@
   | Edge iterator |
   `--------------*/
   template<typename Edge>
-  class edge_iterator : public std::iterator<std::bidirectional_iterator_tag,
+  class edge_iterator /* : public iterator<bidirectional_iterator_tag,
 					     unsigned,
 					     ptrdiff_t,
 					     const unsigned*,
-					     const unsigned&>
+					const unsigned&> */
   {
   public:
     typedef typename Edge::label_t label_t;
Index: include/vaucanson/automata/concept/automata_base.hxx
--- include/vaucanson/automata/concept/automata_base.hxx Tue, 23 Jul 2002 14:46:29 +0200 yann (vaucanson/d/11_automata_b 1.6 600)
+++ include/vaucanson/automata/concept/automata_base.hxx Thu, 25 Jul 2002 10:27:18 +0200 yann (vaucanson/d/11_automata_b 1.6 600)
@@ -42,8 +42,6 @@
   | MetaElement<AutomataBase<Self>, T> |
   `-----------------------------------*/
 
-   
-
   template<typename Self, typename T>
   void MetaElement<AutomataBase<Self>, T>::create()
   { 
Index: include/vaucanson/automata/concept/automata_base.hh
--- include/vaucanson/automata/concept/automata_base.hh Tue, 23 Jul 2002 14:46:29 +0200 yann (vaucanson/d/12_automata_b 1.7 600)
+++ include/vaucanson/automata/concept/automata_base.hh Thu, 25 Jul 2002 10:34:20 +0200 yann (vaucanson/d/12_automata_b 1.7 600)
@@ -171,8 +171,8 @@
       void Name ## c (Container& dst, hstate_t from, const L& query,			\
 		      Kind_type k Init) const;
 
-    DELTA_DECL(delta, delta_kind::edges, = delta_kind::edges());
-    DELTA_DECL(rdelta, delta_kind::edges, = delta_kind::edges());
+    DELTA_DECL(delta, delta_kind::edges, );
+    DELTA_DECL(rdelta, delta_kind::edges, );
 
     DELTA_DECL(delta, delta_kind::states, );
     DELTA_DECL(rdelta, delta_kind::states, );
Index: include/vaucanson/automata/concept/kinds.hh
--- include/vaucanson/automata/concept/kinds.hh Tue, 23 Jul 2002 14:46:29 +0200 yann (vaucanson/d/16_kinds.hh 1.4 600)
+++ include/vaucanson/automata/concept/kinds.hh Thu, 25 Jul 2002 09:36:22 +0200 yann (vaucanson/d/16_kinds.hh 1.4 600)
@@ -21,6 +21,7 @@
 #ifndef AUTOMATA_KINDS_HH
 # define AUTOMATA_KINDS_HH
 
+# include <vaucanson/config/system.hh>
 #include <iterator>
 #include <cassert>
 #include <algorithm>
Index: include/vaucanson/algorithms/union.hxx
--- include/vaucanson/algorithms/union.hxx Wed, 24 Jul 2002 17:33:25 +0200 yann (vaucanson/d/41_union.hxx 1.4 600)
+++ include/vaucanson/algorithms/union.hxx Thu, 25 Jul 2002 11:15:15 +0200 yann (vaucanson/d/41_union.hxx 1.4 600)
@@ -71,9 +71,7 @@
 	 ++i)
       {
 	aim.clear();
-
-	rhs.deltac(aim, *i);
-
+	rhs.deltac(aim, *i, delta_kind::edges());
 	for (typename aim_t::const_iterator d = aim.begin();
 	     d != aim.end();
 	     ++d)
Index: include/vaucanson/algorithms/normalized.hxx
--- include/vaucanson/algorithms/normalized.hxx Tue, 23 Jul 2002 14:46:29 +0200 yann (vaucanson/d/43_normalized 1.3 600)
+++ include/vaucanson/algorithms/normalized.hxx Thu, 25 Jul 2002 11:13:51 +0200 yann (vaucanson/d/43_normalized 1.3 600)
@@ -150,8 +150,8 @@
     if (a.final().size() != 1)
       return false;
     std::set<hstate_t> delta_ret;
-    a.rdeltac(delta_ret, *a.initial().begin());
-    a.deltac(delta_ret, *a.final().begin());
+    a.rdeltac(delta_ret, *a.initial().begin(), delta_kind::states());
+    a.deltac(delta_ret, *a.final().begin(), delta_kind::states());
     if (delta_ret.size() != 0)
       return false;
     return true;
Index: include/vaucanson/tools/usual.hh
--- include/vaucanson/tools/usual.hh Tue, 23 Jul 2002 14:46:29 +0200 yann (vaucanson/e/2_usual.hh 1.9 600)
+++ include/vaucanson/tools/usual.hh Thu, 25 Jul 2002 18:33:24 +0200 yann (vaucanson/e/2_usual.hh 1.9 600)
@@ -22,7 +22,9 @@
 #ifndef TOOLS_USUAL_HH
 # define TOOLS_USUAL_HH
 
+# include <vaucanson/config/system.hh>
 # include <fstream>
+# include <sstream>
 # include <vaucanson/fundamental/fundamental.hh>
 # include <vaucanson/misc/selectors.hh>
 # include <vaucanson/algebra/concrete/free_monoid/str_words.hh>
@@ -87,14 +89,14 @@
 
 #define SAVE_AUTOMATON_DOT(Dir, Name, Auto, Index)		\
     {							\
-      char buf[128];					\
-      snprintf(buf, 128, "%s/%s_%d.dot", Dir, Name, Index);	\
-      std::ofstream f(buf);				\
+      std::ostringstream s;					\
+      s << Dir << "/" << Name << "_" << Index << ".dot";	\
+      std::ofstream f(s.str().c_str());				\
       misc::dot_dump(f, Auto, Name);				\
     }
 
 #define RAND___(Max)							\
-((unsigned) trunc(((float) random() / (float) RAND_MAX) * Max));
+((unsigned) round(((float) rand() / (float) RAND_MAX) * Max));
 
   } // tools
 
Index: include/vaucanson/tools/gen_random.hxx
--- include/vaucanson/tools/gen_random.hxx Wed, 24 Jul 2002 17:59:26 +0200 yann (vaucanson/e/3_gen_random 1.10 600)
+++ include/vaucanson/tools/gen_random.hxx Thu, 25 Jul 2002 16:24:32 +0200 yann (vaucanson/e/3_gen_random 1.10 600)
@@ -22,14 +22,12 @@
 #ifndef GEN_RANDOM_HXX
 # define GEN_RANDOM_HXX
 
+# include <vaucanson/config/system.hh>
 # include <vaucanson/tools/gen_random.hh>
-
 # include <map>
-# include <stdlib.h>
-# include <math.h>
+# include <cstdlib>
 # include <iostream>
 # include <fstream>
-
 # include <vaucanson/tools/usual.hh>
 
 namespace vcsn {
@@ -43,7 +41,7 @@
   template <class TAutomata>
   GenRandomAutomata<TAutomata>::GenRandomAutomata(unsigned init) 
   { 
-    srandom(init); 
+    srand(init); 
   }
   
   template <class TAutomata>
@@ -126,10 +124,13 @@
       }
 
     for (unsigned i = 0; i < nb_edge; i++)
-      work.add_letter_edge(work.select_state(alea(work.states().size())), 
-			   work.select_state(alea(work.states().size())), 
+      {
+	unsigned from = alea(work.states().size());
+	unsigned to = alea(work.states().size());
+	work.add_letter_edge(work.select_state(from),
+			     work.select_state(to), 
 			   alpha.choose());
-
+      }
     
     work.set_initial(*work.states().begin());
     // set initial states
@@ -303,7 +304,7 @@
   template <class TAutomata>
   unsigned GenRandomAutomata<TAutomata>::alea(unsigned max)
   {
-    return ((unsigned) trunc(((float) random() / (float) RAND_MAX) * max));
+    return ((unsigned) round(((float) rand() / (float) RAND_MAX) * (max-1)));
   }
 
 } // vcsn
Index: include/vaucanson/tools/gen_random.hh
--- include/vaucanson/tools/gen_random.hh Tue, 23 Jul 2002 14:46:29 +0200 yann (vaucanson/e/4_gen_random 1.9 600)
+++ include/vaucanson/tools/gen_random.hh Thu, 25 Jul 2002 10:05:02 +0200 yann (vaucanson/e/4_gen_random 1.9 600)
@@ -18,10 +18,10 @@
 // License along with this library; if not, write to the Free Software
 // Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 
-
 #ifndef GEN_RANDOM_HH
 # define GEN_RANDOM_HH
 
+# include <vaucanson/config/system.hh>
 # include <vaucanson/fundamental/fundamental.hh>
 
 # include <vaucanson/automata/concept/automata.hh>
@@ -43,8 +43,6 @@
     typedef typename TAutomata::state_iterator		  state_iterator;
     typedef typename TAutomata::monoid_t::alphabet_t	  alphabet_t;
     typedef typename alphabet_t::iterator		  alphabet_iterator;
-    typedef typename TAutomata::states_t		  states_t;
-    typedef typename TAutomata::state_iterator		  state_iterator;
     typedef typename TAutomata::monoid_t::alphabets_elt_t alphabets_elt_t;
     
     GenRandomAutomata();
Index: include/vaucanson/misc/random.hxx
--- include/vaucanson/misc/random.hxx Tue, 23 Jul 2002 14:46:29 +0200 yann (vaucanson/e/7_random.hxx 1.4 600)
+++ include/vaucanson/misc/random.hxx Thu, 25 Jul 2002 10:10:26 +0200 yann (vaucanson/e/7_random.hxx 1.4 600)
@@ -21,6 +21,7 @@
 #ifndef MISC_RANDOM_HXX
 # define MISC_RANDOM_HXX
 
+# include <vaucanson/misc/random.hh>
 # include <cstdlib>
 
 namespace vcsn {
@@ -37,7 +38,7 @@
     char 
     RandomGenerator<char>::do_it()
     {
-      float f = float(random()) / float(RAND_MAX);
+      float f = float(rand()) / float(RAND_MAX);
       unsigned offs = unsigned((26 * f));
       return ('a' + offs);
     }
Index: include/vaucanson/algorithms/moore.hxx
--- include/vaucanson/algorithms/moore.hxx Tue, 23 Jul 2002 14:46:29 +0200 yann (vaucanson/e/23_moore.hxx 1.3 600)
+++ include/vaucanson/algorithms/moore.hxx Thu, 25 Jul 2002 18:58:42 +0200 yann (vaucanson/e/23_moore.hxx 1.3 600)
@@ -22,6 +22,7 @@
 #ifndef ALGO_MOORE_MINIMIZE_HXX
 # define ALGO_MOORE_MINIMIZE_HXX
 
+# include <vaucanson/config/system.hh>
 # include <map>
 # include <set>
 # include <queue>
@@ -29,7 +30,7 @@
 # include <list>
 # include <utility>
 # include <stack>
-
+# include <vaucanson/algorithms/trim.hh>
 # include <vaucanson/automata/concept/automata_base.hh>
 # include <vaucanson/automata/concept/history.hh>
 
@@ -71,7 +72,6 @@
     typedef std::map<letter_t, current_succ_t>		letter_succ_t;
     typedef std::map<unsigned, hstate_t>		conv_map_t;
 
-
     const alphabet_t	&alphabet = input.series().monoid().alphabet();
     unsigned		max_partitions = 0;
     class_t		classes(input.states().size());
@@ -154,7 +154,9 @@
 		       part[P].begin();
 		     p_ != part[P].end(); 
 		     ++p_)
-		  if ((csucc[*p_] == csucc[*p]) && (*p != *p_))
+		  if ((csucc[*p_] == csucc[*p])
+		      &&
+		      (*p != *p_))
 		      new_p.push_back(*p_);
 		new_p.push_back(*p);
 		if (new_p.size() != part[P].size())
@@ -244,7 +246,7 @@
     output.create();
     output.series() = a.series();
     do_moore_minimization(a.set(), output, a);
-    return output;
+    return trim(output);
   }
 
 } // vcsn
Index: include/vaucanson/algorithms/hopcroft.hxx
--- include/vaucanson/algorithms/hopcroft.hxx Tue, 23 Jul 2002 14:46:29 +0200 yann (vaucanson/e/25_hopcroft.h 1.3 600)
+++ include/vaucanson/algorithms/hopcroft.hxx Thu, 25 Jul 2002 18:58:36 +0200 yann (vaucanson/e/25_hopcroft.h 1.3 600)
@@ -27,6 +27,7 @@
 # include <queue>
 # include <list>
 
+# include <vaucanson/algorithms/trim.hh>
 # include <vaucanson/automata/concept/automata_base.hh>
 # include <vaucanson/automata/concept/history.hh>
 
@@ -348,7 +349,7 @@
     output.create();
     output.series() = a.series();
     do_hopcroft_minimization_det(a.set(), output, a);
-    return output;
+    return trim(output);
   }
 
 
Index: src/tests/automata/algos/realtime_test.hh
--- src/tests/automata/algos/realtime_test.hh Tue, 23 Jul 2002 14:46:29 +0200 yann (vaucanson/e/49_realtime_t 1.3 600)
+++ src/tests/automata/algos/realtime_test.hh Thu, 25 Jul 2002 11:19:03 +0200 yann (vaucanson/e/49_realtime_t 1.3 600)
@@ -57,9 +57,9 @@
       if (is_realtime(a))
 	++success;
     } 
-  char buff[128];
-  snprintf(buff, 128, "is_realtime on realtime (%d/%d)", success, nb_ok_tests);
-  TEST(t, buff, success == nb_ok_tests);
+  std::string rate;
+  SUCCESS_RATE(rate, success, nb_ok_tests);
+  TEST(t, "is_realtime on realtime "+rate, success == nb_ok_tests);
 
   success = 0;
   for (unsigned i = 0; i < nb_non_ok_tests; i++)
@@ -68,8 +68,8 @@
       if (!is_realtime(a))
 	++success;
     } 
-  snprintf(buff, 128, "is_realtime on non-realtime (%d/%d)", success, nb_non_ok_tests);
-  TEST(t, buff, success == nb_non_ok_tests);
+  SUCCESS_RATE(rate, success, nb_non_ok_tests);
+  TEST(t, "is_realtime on non-realtime "+rate, success == nb_non_ok_tests);
 
   unsigned nb_tests = 20;
   success = 0;
@@ -80,8 +80,8 @@
       if (is_realtime(non_epsilon))
 	++success;
     } 
-  snprintf(buff, 128, "realtime on non-realtime (%d/%d)", success, nb_tests);
-  TEST(t, buff, success == nb_non_ok_tests);
+  SUCCESS_RATE(rate, success, nb_tests);
+  TEST(t, "realtime on non-realtime "+rate, success == nb_tests);
 
   return t.all_passed();
 }
Index: src/tests/automata/algos/minimization_test.hh
--- src/tests/automata/algos/minimization_test.hh Wed, 24 Jul 2002 17:59:26 +0200 yann (vaucanson/f/10_minimizati 1.5 600)
+++ src/tests/automata/algos/minimization_test.hh Thu, 25 Jul 2002 19:35:20 +0200 yann (vaucanson/f/10_minimizati 1.5 600)
@@ -21,6 +21,7 @@
 #ifndef MINIMIZATION_TEST_HH
 # define MINIMIZATION_TEST_HH
 
+# include <sstream>
 # include <map>
 # include <algorithm>
 # include <list>
@@ -54,13 +55,13 @@
   tests::Tester t(tg.verbose());
   gen_auto_t    gen(time(0x0));
 
-  const unsigned nb_test    = 10;
+  const unsigned nb_test    = 20;
   unsigned success_hopcroft = 0;
   unsigned success_moore    = 0;
 
   for (unsigned i = 0; i < nb_test; i++)
     {
-      automaton_t work = gen.generate_dfa(5, 10);
+      automaton_t work = gen.generate_dfa(10, 10);
 
       if (t.verbose() == tests::high)
 	{
@@ -69,11 +70,10 @@
 	}
       
       typedef typename transpose_traits<automaton_t>::transpose_t transpose_t;
-      typedef typename transpose_traits<transpose_t>::transpose_t tranpose_transpose_t;
+      typedef typename transpose_traits<transpose_t>::transpose_t transpose_transpose_t;
       
-      tranpose_transpose_t minimize = 
+      transpose_transpose_t minimize = 
 	determinize(transpose_view(trim(determinize(transpose_view(work)))));
-      
       automaton_t hopcroft = hopcroft_minimization_det(work);
       automaton_t moore = moore_minimization(work);
 
@@ -92,10 +92,23 @@
       if ((minimize.states().size() == hopcroft.states().size()) &&
 	  (minimize.edges().size() ==  hopcroft.edges().size()))
 	++success_hopcroft;
+      else if (t.verbose() == tests::high)
+	{
+	  std::ostringstream s;					
+	  s << "Hopcroft failed on " << i << std::ends;
+	  TEST_MSG(s.str());
+	}
 
       if ((minimize.states().size() == moore.states().size()) &&
 	  (minimize.edges().size() ==  moore.edges().size()))
 	++success_moore;
+      else if (t.verbose() == tests::high)
+	{
+	  std::ostringstream s;					
+	  s << "Moore failed on " << i << std::ends;
+	  TEST_MSG(s.str());
+	}
+
     }
 
   std::string rate_hopcroft;
Index: src/tests/tests-suites/usual_automaton_t/add_state-test
--- src/tests/tests-suites/usual_automaton_t/add_state-test Wed, 24 Jul 2002 17:59:26 +0200 yann (vaucanson/f/41_add_state- 1.4 700)
+++ src/tests/tests-suites/usual_automaton_t/add_state-test Thu, 25 Jul 2002 19:59:31 +0200 yann (vaucanson/f/41_add_state- 1.4 700)
@@ -1,1501 +1,79 @@
-ELFibc.so.6
